Sys.setenv('MAPBOX_TOKEN' = "pk.eyJ1IjoicmFuaWkyMiIsImEiOiJjamVnNDQ3NnExcDZiMzNvN3dtemNkdmF3In0.9xXW1i3CBnuYr4N6TrbJXA")
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,
split = ~Year, size=2, text = ~name,
mode = 'scattermapbox', hoverinfo= "text") %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
View(df)
df <- df %>%
filter(State != "") %>%
group_by(State,City, Year) %>%
summarise(all_death = sum(All.Deaths))
year.input <- 1997
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
summarise(all_death = sum(All.Deaths))
df <- read.csv('data/deaths_in_122_US.cities.csv')
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
summarise(all_death = sum(All.Deaths)) %>%
mutate(name = paste(City, State)) %>%
left_join(us.cities) %>%
na.omit()
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,
size=~all_death, text = ~name,
mode = 'scattermapbox', hoverinfo= "text") %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
summarise(all_death = sum(All.Deaths)) %>%
mutate(name = paste(City, State,", Death: ",all_death))
year.input <- 1997
df <- read.csv('data/deaths_in_122_US.cities.csv')
Sys.setenv('MAPBOX_TOKEN' = "pk.eyJ1IjoicmFuaWkyMiIsImEiOiJjamVnNDQ3NnExcDZiMzNvN3dtemNkdmF3In0.9xXW1i3CBnuYr4N6TrbJXA")
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
summarise(all_death = sum(All.Deaths)) %>%
mutate(name = paste(City, State,", Death: ",all_death))
year.input <- 1997
df <- read.csv('data/deaths_in_122_US.cities.csv')
Sys.setenv('MAPBOX_TOKEN' = "pk.eyJ1IjoicmFuaWkyMiIsImEiOiJjamVnNDQ3NnExcDZiMzNvN3dtemNkdmF3In0.9xXW1i3CBnuYr4N6TrbJXA")
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
summarise(all_death = sum(All.Deaths)) %>%
mutate(name = paste(City, State,", Death: ",all_death),
cut(all_death,10)) %>%
left_join(us.cities) %>%
na.omit()
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,
size=~all_death, text = ~name,
mode = 'scattermapbox', hoverinfo= "text") %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
df <- read.csv('data/deaths_in_122_US.cities.csv')
Sys.setenv('MAPBOX_TOKEN' = "pk.eyJ1IjoicmFuaWkyMiIsImEiOiJjamVnNDQ3NnExcDZiMzNvN3dtemNkdmF3In0.9xXW1i3CBnuYr4N6TrbJXA")
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
summarise(all_death = sum(All.Deaths)) %>%
mutate(name = paste(City, State,", Death: ",all_death),
cut(all_death,10)) %>%
left_join(us.cities) %>%
na.omit()
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
na.omit() %>%
summarise(all_death = sum(All.Deaths)) %>%
mutate(name = paste(City, State,", Death: ",all_death),
cut(all_death,10)) %>%
left_join(us.cities)
df <- read.csv('data/deaths_in_122_US.cities.csv')
Sys.setenv('MAPBOX_TOKEN' = "pk.eyJ1IjoicmFuaWkyMiIsImEiOiJjamVnNDQ3NnExcDZiMzNvN3dtemNkdmF3In0.9xXW1i3CBnuYr4N6TrbJXA")
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
na.omit() %>%
summarise(all_death = sum(All.Deaths)) %>%
mutate(name = paste(City, State,", Death: ",all_death),
cut(all_death,10)) %>%
left_join(us.cities)
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,
size=~all_death, text = ~name,
mode = 'scattermapbox', hoverinfo= "text") %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
runApp()
year.input <- 1997
df <- read.csv('data/deaths_in_122_US.cities.csv')
Sys.setenv('MAPBOX_TOKEN' = "pk.eyJ1IjoicmFuaWkyMiIsImEiOiJjamVnNDQ3NnExcDZiMzNvN3dtemNkdmF3In0.9xXW1i3CBnuYr4N6TrbJXA")
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
na.omit() %>%
summarise(all_death = sum(All.Deaths)) %>%
mutate(name = paste(City, State),
hover = paste(City, State,", Death: ",all_death),
cut(all_death,10)) %>%
left_join(us.cities)
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,
size=~all_death, text = ~name,
mode = 'scattermapbox', hoverinfo= "text") %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,
size=~all_death, text = ~name,
mode = 'scattermapbox', hoverinfo= "text", showlegend = TRUE) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,
split=~all_death, text = ~name,
mode = 'scattermapbox', hoverinfo= "text", showlegend = TRUE) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,
split=~all_death, text = ~name,
mode = 'scattermapbox', hoverinfo= "text", showlegend = FALSE) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
year.input <- 1997
df <- read.csv('data/deaths_in_122_US.cities.csv')
Sys.setenv('MAPBOX_TOKEN' = "pk.eyJ1IjoicmFuaWkyMiIsImEiOiJjamVnNDQ3NnExcDZiMzNvN3dtemNkdmF3In0.9xXW1i3CBnuYr4N6TrbJXA")
df <- df %>%
filter(State != "", Year == year.input) %>%
group_by(State,City, Year) %>%
na.omit() %>%
summarise(all_death = sum(All.Deaths)) %>%
mutate(name = paste(City, State),
hover = paste(City, State,", Death: ",all_death)) %>%
left_join(us.cities)
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox') %>%
add_markers(size=~all_death, text = ~name, hoverinfo= "text", showlegend = FALSE) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox') %>%
add_markers(size=~all_death, text = ~name, hoverinfo= "text", showlegend = TRUE) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark'),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center - list(39.8283,-98.5795),
zoome = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
Center - list(39.8283,-98.5795),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(39.8283,-98.5795),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = 39.8283,long = -98.5795),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = 39.8283,long = 98.5795),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = 39.8283,long = 98.5795W),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = 39.8283,long = -98.5795),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = -39.8283,long = -98.5795),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = 39.8283,long = 98.5795),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = 39.8283,long = -98.5795),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = 39.8283,long = "98.5795W"),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = mean(~lat),long = mean(~long)),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(lat = mean(lat),long = mean(long)),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
center = list(mean(~lat),mean(~long)),
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death) %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death, text = ~hover, hoverinfo = "text") %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long, split=~City,mode = 'scattermapbox', text = ~hover, hoverinfo = "text") %>%
add_markers(size=~all_death, text = ~hover, hoverinfo = "text") %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
# p <-
df %>%
plot_mapbox(lat = ~lat, lon = ~long, split=~City,mode = 'scattermapbox', text = ~hover, hoverinfo = "text", showlegend = FALSE) %>%
add_markers(size=~all_death, text = ~hover, hoverinfo = "text") %>%
layout(title = 'Deaths by Cities',
font = list(color='white'),
plot_bgcolor = '#191A1A', paper_bgcolor = '#191A1A',
mapbox = list(style = 'dark',
zoom = 3),
legend = list(orientation = 'h',
font = list(size = 8)),
margin = list(l = 25, r = 25,
b = 25, t = 25,
pad = 2))
